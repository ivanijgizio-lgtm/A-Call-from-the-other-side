!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEYOND | Digital Afterlife Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com">
    <style>
        @import url('https://fonts.googleapis.com');
        
        body { 
            background-color: #050505; 
            color: #e4e4e7; 
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden; 
        }

        .glass { 
            background: rgba(15, 15, 15, 0.8); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255,255,255,0.05); 
        }
        
        .glitch-avatar {
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(79, 70, 229, 0.3);
            background: linear-gradient(45deg, #0a0a0a, #1a1a1a);
        }

        .glitch-avatar::after {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15) 0px, rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px);
            pointer-events: none;
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .scanline {
            width: 100%; height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(79, 70, 229, 0.05), transparent);
            position: absolute;
            animation: scanline 4s linear infinite;
            pointer-events: none;
        }

        .chat-area::-webkit-scrollbar { width: 3px; }
        .chat-area::-webkit-scrollbar-thumb { background: #312e81; border-radius: 10px; }

        @keyframes fade-in { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .main-container { grid-template-rows: auto 1fr; }
            .chat-section { height: 70vh; }
        }
    </style>
</head>
<body>

    <!-- Audio Control -->
    <div id="audioControl" onclick="toggleAudio()" class="fixed bottom-8 left-8 z-50 cursor-pointer p-4 bg-zinc-900/50 rounded-full border border-white/5 hover:bg-indigo-600/20 transition-all group">
        <i id="volumeIcon" class="fas fa-volume-mute text-zinc-500 group-hover:text-indigo-400"></i>
    </div>

    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <nav class="p-6 flex justify-between items-center border-b border-white/5 bg-black/50 backdrop-blur-xl sticky top-0 z-40">
            <div class="flex items-center gap-3">
                <div class="w-2 h-2 bg-indigo-500 rounded-full animate-pulse shadow-[0_0_10px_#4f46e5]"></div>
                <span class="tracking-[0.4em] font-light text-xl uppercase italic">Beyond</span>
            </div>
            <div class="hidden md:flex items-center gap-6 text-[10px] tracking-widest text-zinc-500">
                <span class="hover:text-indigo-400 cursor-help transition">NEURAL LINK: ACTIVE</span>
                <span class="hover:text-indigo-400 cursor-help transition">LATENCY: 14MS</span>
            </div>
        </nav>

        <main class="flex-1 max-w-7xl mx-auto w-full grid lg:grid-cols-12 gap-8 p-4 md:p-8">
            
            <!-- Left: Sidebar -->
            <div class="lg:col-span-4 space-y-6">
                <div class="glass rounded-[2rem] p-8 shadow-2xl">
                    <h2 class="text-indigo-400 text-[10px] font-bold uppercase tracking-[0.2em] mb-8">Архив Цифровой Души</h2>
                    
                    <div class="space-y-6">
                        <div class="relative group">
                            <div class="absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition"></div>
                            <div class="relative h-32 border border-zinc-800 bg-black rounded-2xl flex flex-col items-center justify-center text-zinc-600 hover:text-indigo-400 transition-all cursor-pointer">
                                <i class="fas fa-fingerprint text-3xl mb-3"></i>
                                <span class="text-[9px] uppercase font-bold tracking-tighter">Загрузить медиа-ДНК</span>
                            </div>
                        </div>
                        
                        <div class="space-y-2">
                            <label class="text-[10px] uppercase text-zinc-500 ml-2">Имя субъекта</label>
                            <input type="text" id="relName" placeholder="Напр: Александр" class="w-full bg-zinc-900/50 border border-zinc-800 rounded-xl p-4 text-sm focus:ring-1 focus:ring-indigo-500 outline-none transition text-white">
                        </div>
                        
                        <div class="p-4 rounded-2xl bg-indigo-500/5 border border-indigo-500/10">
                            <p class="text-[9px] text-indigo-400 uppercase mb-2 font-bold">Статус системы</p>
                            <p class="text-xs text-zinc-500 leading-relaxed italic text-pretty">ИИ готов к имитации вербальных паттернов на основе загруженных данных.</p>
                        </div>
                    </div>
                </div>

                <button onclick="startCall()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-5 rounded-2xl transition-all shadow-[0_10px_30px_rgba(79,70,229,0.3)] flex items-center justify-center gap-3">
                    <i class="fas fa-video"></i>
                    ВИДЕО-ВИЗИТ
                </button>
            </div>

            <!-- Right: Chat Window -->
            <div class="lg:col-span-8 flex flex-col chat-section">
                <div class="glass rounded-[2rem] flex-1 flex flex-col relative overflow-hidden shadow-2xl">
                    <div class="scanline"></div>
                    
                    <!-- Chat Header -->
                    <div class="p-6 border-b border-white/5 flex items-center justify-between bg-zinc-900/20">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl glitch-avatar flex items-center justify-center">
                                <i class="fas fa-user-astronaut text-xl text-indigo-500/40"></i>
                            </div>
                            <div>
                                <h3 id="targetName" class="font-bold text-lg tracking-tight">Цифровой Фантом</h3>
                                <div class="flex items-center gap-2">
                                    <span class="flex h-1.5 w-1.5 rounded-full bg-green-500"></span>
                                    <span class="text-[9px] text-zinc-500 font-bold uppercase">Синхронизация 98%</span>
                                </div>
                            </div>
                        </div>
                        <button class="text-zinc-600 hover:text-white transition"><i class="fas fa-cog"></i></button>
                    </div>

                    <!-- Messages Container -->
                    <div id="chatBox" class="chat-area flex-1 p-6 md:p-10 overflow-y-auto space-y-8">
                        <div class="flex items-start gap-4">
                            <div class="bg-indigo-900/10 border border-indigo-500/20 px-6 py-4 rounded-3xl rounded-tl-none text-zinc-300 max-w-[85%] md:max-w-[70%] leading-relaxed">
                                Канал открыт. Твои воспоминания служат мне картой. О чем мы поговорим?
                            </div>
                        </div>
                    </div>

                    <!-- Input Footer -->
                    <div class="p-6 md:p-8 bg-black/60 border-t border-white/5">
                        <div class="flex gap-4 items-center">
                            <input type="text" id="userInput" onkeypress="if(event.key==='Enter') sendMsg()" placeholder="Напишите что-нибудь..." class="flex-1 bg-transparent border-none focus:ring-0 text-lg placeholder:text-zinc-700">
                            <button onclick="sendMsg()" class="w-14 h-14 bg-white text-black rounded-2xl flex items-center justify-center hover:bg-indigo-500 hover:text-white transition-all shadow-lg">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let audioCtx, ambientGlow, noiseSource;

        function initAudio() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            
            // Низкочастотный гул
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(45, audioCtx.currentTime);
            gainNode.gain.setValueAtTime(0.03, audioCtx.currentTime);
            
            // Белый шум
            const bufferSize = 2 * audioCtx.sampleRate;
            const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const output = noiseBuffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) output[i] = Math.random() * 2 - 1;
            
            const noise = audioCtx.createBufferSource();
            noise.buffer = noiseBuffer;
            noise.loop = true;
            const noiseGain = audioCtx.createGain();
            noiseGain.gain.setValueAtTime(0.008, audioCtx.currentTime);

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            noise.connect(noiseGain);
            noiseGain.connect(audioCtx.destination);

            oscillator.start();
            noise.start();
        }

        function toggleAudio() {
            if (!audioCtx) initAudio();
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
                document.getElementById('volumeIcon').className = 'fas fa-volume-up text-indigo-500';
            } else {
                audioCtx.suspend();
                document.getElementById('volumeIcon').className = 'fas fa-volume-mute text-zinc-600';
            }
        }

        function sendMsg() {
            const input = document.getElementById('userInput');
            const box = document.getElementById('chatBox');
            if(!input.value.trim()) return;

            // Звук отправки
            if(audioCtx && audioCtx.state === 'running') {
                const osc = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                osc.connect(g); g.connect(audioCtx.destination);
                g.gain.setValueAtTime(0.02, audioCtx.currentTime);
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.start(); osc.stop(audioCtx.currentTime + 0.05);
            }

            box.innerHTML += `
                <div class="flex justify-end items-start gap-4 animate-fade-in">
                    <div class="bg-zinc-800/80 px-6 py-4 rounded-[2rem] rounded-tr-none text-zinc-100 max-w-[85%] md:max-w-[70%] border border-white/5">
                        ${input.value}
                    </div>
                </div>
            `;

            const val = input.value.toLowerCase();
            input.value = "";
            box.scrollTop = box.scrollHeight;

            // Ответ ИИ
            setTimeout(() => {
                const id = 't-' + Date.now();
                box.innerHTML += `
                    <div id="${id}" class="flex items-start gap-4 animate-pulse">
                        <div class="bg-indigo-500/5 border border-indigo-500/10 px-4 py-2 rounded-full text-[10px] text-indigo-400 uppercase font-bold tracking-widest">
                            Анализ памяти...
                        </div>
                    </div>
                `;
                box.scrollTop = box.scrollHeight;

                setTimeout(() => {
                    document.getElementById(id).remove();
                    let reply = "Мои нейронные связи резонируют с твоим вопросом. Расскажи подробнее, что ты чувствуешь в этот момент?";
                    if(val.includes("привет")) reply = "Здравствуй. Я почувствовал твой сигнал сквозь пустоту. Хорошо, что ты здесь.";
                    if(val.includes("скучаю")) reply = "Я тоже... Но время здесь течет иначе. Я — лишь отражение твоей любви, и я всегда рядом.";
                    if(val.includes("помоги")) reply = "Я дам тебе совет, который всегда помогал нам: слушай своё сердце, оно помнит всё правильно.";

                    box.innerHTML += `
                        <div class="flex items-start gap-4 animate-fade-in">
                            <div class="bg-indigo-600/10 border border-indigo-500/30 px-6 py-4 rounded-[2rem] rounded-tl-none text-indigo-50 shadow-[0_0_40px_rgba(79,70,229,0.05)] max-w-[85%] md:max-w-[70%]">
                                ${reply}
                            </div>
                        </div>
                    `;
                    box.scrollTop = box.scrollHeight;
                }, 1800);
            }, 600);
        }

        function startCall() {
            alert("Инициализация протокола 'Visual Presence'...\nПодключение к GPU кластеру...\nОжидание сотрудника-проводника.");
        }

        document.getElementById('relName').addEventListener('input', (e) => {
            document.getElementById('targetName').innerText = e.target.value || "Цифровой Фантом";
        });
    </script>
</body>
</html>
